<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>paket hemat </title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --neon: #ffb347;
  --accent-1: #ffffff;
  --accent-2: #6c63ff;
  --bg-a: #0b0420;
  --bg-b: #241040;
  --text: #fff8f0;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:"Poppins",sans-serif;color:var(--text);background:linear-gradient(180deg,var(--bg-a),var(--bg-b));overflow-x:hidden}
.container{max-width:980px;margin:24px auto;padding:18px;position:relative;z-index:3}

/* header */
header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:10px 0}
.brand{display:flex;align-items:center;gap:12px}
.logo{width:48px;height:48px;border-radius:10px;background:linear-gradient(135deg,var(--neon),var(--accent-2));display:grid;place-items:center;color:#051018;font-weight:800}
h1{font-size:18px;margin:0;background:linear-gradient(90deg,var(--neon),var(--accent-2));-webkit-background-clip:text;color:transparent}
.header-meta{color:#bfcfe0;font-size:13px}

/* layout */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:14px;margin-top:18px}
.card{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.04);padding:16px;border-radius:12px;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
.card h2{margin:0 0 8px;color:var(--neon)}
.price{font-weight:800;color:var(--neon)}
.ul{margin:8px 0;padding-left:16px;color:#c8d8ea}

/* button */
.btn{display:inline-block;padding:10px 14px;border-radius:999px;font-weight:700;text-decoration:none;border:none;cursor:pointer}
.btn-primary{background:linear-gradient(90deg,var(--neon),var(--accent-2));color:#051018;box-shadow:0 8px 30px rgba(108,99,255,0.08)}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:#cfe7ff}

/* footer */
footer{text-align:center;color:#aebecd;margin-top:26px;font-size:13px}

/* modal */
.modal{display:none;position:fixed;inset:0;background:rgba(3,6,12,0.72);backdrop-filter:blur(4px);align-items:center;justify-content:center;z-index:40}
.modal.open{display:flex}
.modal-box{background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.015));padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);max-width:420px;width:92%;text-align:center}
.modal-box h3{margin:0 0 6px;color:var(--neon)}
.modal-box p{color:#c7d7ea;font-size:14px}
.input{width:92%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);margin:8px auto;background:rgba(255,255,255,0.02);color:var(--text);display:block}

/* responsive */
@media (max-width:480px){
  header{flex-direction:column;align-items:flex-start;gap:8px}
}

/* canvas layer */
#bgCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}
</style>
</head>
<body>
<canvas id="bgCanvas" aria-hidden="true"></canvas>

<div class="container" role="main">
  <header>
    <div class="brand">
      <div class="logo">ph</div>
      <div>
        <h1>paket hemat</h1>
        <div class="header-meta">Kuota premium — siap pakai & terkonfigurasi</div>
      </div>
    </div>
    <div>
      <button class="btn btn-primary" id="openQrisBtn">Pembayaran QRIS</button>
    </div>
  </header>

  <section class="grid" aria-label="Paket Kuota">
    <article class="card">
      <h2>XL Edukasi</h2>
      <div class="price">Rp12.000</div>
      <ul class="ul"><li>15GB - 7 Hari</li><li>Ready + Config</li></ul>
      <button class="btn btn-primary" onclick="openPayment('XL Edukasi','12000')">Bayar via QRIS</button>
    </article>

    <article class="card">
      <h2>XL Conference</h2>
      <div class="price">Rp14.000</div>
      <ul class="ul"><li>15GB - 7 Hari</li><li>Cocok meeting online</li></ul>
      <button class="btn btn-primary" onclick="openPayment('XL Conference','14000')">Bayar via QRIS</button>
    </article>

    <article class="card">
      <h2>Indosat Apps Fun</h2>
      <div class="price">Rp30.000</div>
      <ul class="ul"><li>12GB - 30 Hari</li><li>Ready + Config</li></ul>
      <button class="btn btn-primary" onclick="openPayment('Indosat Apps Fun','30000')">Bayar via QRIS</button>
    </article>

    <article class="card">
      <h2>XL Bizz Lite</h2>
      <div class="price">Rp50.000</div>
      <ul class="ul"><li>Unlimited - 30 Hari</li><li>Saran: jangan pakai nomor utama</li></ul>
      <button class="btn btn-primary" onclick="openPayment('XL Bizz Lite','50000')">Bayar via QRIS</button>
    </article>

    <article class="card">
      <h2>XL Bizz Tayo</h2>
      <div class="price">Rp65.000</div>
      <ul class="ul"><li>Unlimited - 30 Hari</li><li>Unlimited Premium</li></ul>
      <button class="btn btn-primary" onclick="openPayment('XL Bizz Tayo','65000')">Bayar via QRIS</button>
    </article>

    <article class="card">
      <h2>XL Double YouTube (Premium)</h2>
      <div class="price">Rp75.000</div>
      <ul class="ul"><li>Unlimited - 30 Hari</li><li>Kuota siap pakai (Sudah + Config)</li></ul>
      <button class="btn btn-primary" onclick="openPayment('XL Double YouTube','75000')">Bayar via QRIS</button>
    </article>
  </section>

  <footer>
    © 2023 new project · CS: <a href="https://wa.me/628565050103" target="_blank" style="color:inherit">+62 856-5050-103</a>
  </footer>
</div>

<!-- Modal QRIS -->
<div id="qrisModal" class="modal" role="dialog" aria-modal="true">
  <div class="modal-box" role="document">
    <button id="closeModal" style="float:right;background:transparent;border:0;color:var(--neon);font-size:18px;cursor:pointer">✕</button>
    <h3>Pembayaran QRIS</h3>
    <p id="modalNote">Scan QR untuk bayar — setelah bayar, kirim bukti lalu konfirmasi WA.</p>

    <img id="qrImg" alt="QRIS" style="width:240px;height:240px;border-radius:8px;margin:8px 0;display:block;margin-left:auto;margin-right:auto;background:#fff">

    <div style="margin-top:8px">
      <textarea id="payloadText" readonly style="width:94%;height:72px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(0,0,0,0.25);color:var(--text);resize:none"></textarea>
    </div>

    <div style="display:flex;gap:10px;justify-content:center;margin-top:10px;flex-wrap:wrap">
      <button id="copyBtn" class="btn btn-ghost">Salin Payload</button>
      <button id="downloadBtn" class="btn btn-primary">Download QR / Simpan Bukti</button>
      <a id="waBtn" class="btn btn-primary" target="_blank" rel="noopener">Konfirmasi via WA</a>
    </div>
  </div>
</div>

<!-- hidden canvas for download fallback -->
<canvas id="hiddenCanvas" style="display:none;"></canvas>

<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
<script>
/* ========= Configuration ========= */
const qrisPayload = "00020101021126670016COM.NOBUBANK.WWW01189360050300000879140214338591332891790303UMI51440014ID.CO.QRIS.WWW0215ID20253892885930303UMI5204541153033605802ID5923LAMPUNG STORE OK23053346009PESAWARAN61053535362070703A01630448C0";
const waBase = "https://wa.me/628565050103?text=";
/* ================================= */

/* ==== Canvas: stars + meteors (light & smooth) ==== */
const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
let DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1)); // cap DPR for perf
let W = canvas.width = innerWidth * DPR;
let H = canvas.height = innerHeight * DPR;
canvas.style.width = innerWidth + 'px';
canvas.style.height = innerHeight + 'px';

window.addEventListener('resize', () => {
  DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  W = canvas.width = innerWidth * DPR;
  H = canvas.height = innerHeight * DPR;
  canvas.style.width = innerWidth + 'px';
  canvas.style.height = innerHeight + 'px';
  initStars();
});

let stars = [];
const STAR_COUNT = 25; // lightweight

function initStars(){
  stars = [];
  for(let i=0;i<STAR_COUNT;i++){
    stars.push({
      x: Math.random() * W,
      y: Math.random() * H,
      r: (Math.random() * 1.2 + 0.6) * DPR,
      baseA: 0.3 + Math.random()*0.7,
      a: 0,
      speed: 0.002 + Math.random()*0.006 // flicker speed
    });
  }
}
initStars();

let meteors = []; // active meteors

function spawnMeteor(){
  // spawn from right-top quadrant toward lower-left
  const startX = W * (0.8 + Math.random()*0.2);
  const startY = H * (0.05 + Math.random()*0.25);
  const ang = -0.9 - Math.random()*0.3; // angle in radians (approx -51 to -72 deg) toward bottom-left
  const speed = (0.8 + Math.random()*0.8) * DPR; // pixels/frame-ish (scaled with DPR)
  const length = 80 + Math.random()*120;
  // color gradient: gold -> white -> blue -> purple
  meteors.push({
    x: startX,
    y: startY,
    vx: Math.cos(ang) * speed,
    vy: Math.sin(ang) * speed,
    life: 0,
    ttl: 80 + Math.random()*30,
    length,
    lineWidth: 2 * DPR
  });
}

// spawn rarer + smooth: every ~5s average
let meteorTimer = 0;
const METEOR_INTERVAL = 5000; // ms

// animation loop
let last = performance.now();
function loop(now){
  const dt = now - last;
  last = now;

  // clear with subtle gradient
  ctx.clearRect(0,0,W,H);

  // draw subtle radial glow center
  const g = ctx.createLinearGradient(0,0,0,H);
  g.addColorStop(0, 'rgba(255,255,255,0.02)');
  g.addColorStop(1, 'rgba(0,0,0,0.12)');
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  // stars
  for(let s of stars){
    // flicker
    s.a += s.speed * dt * (Math.random()*0.6 + 0.7);
    // normalize alpha
    const alpha = s.baseA * (0.6 + 0.4 * Math.sin(s.a));
    ctx.beginPath();
    ctx.fillStyle = `rgba(255,220,160,${alpha})`; // warm star color
    ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
    ctx.fill();
  }

  // spawn meteor occasionally (timed)
  meteorTimer += dt;
  if(meteorTimer >= METEOR_INTERVAL){
    meteorTimer = 0;
    // small chance to spawn multiple? keep 1 for perf
    if(Math.random() < 0.95) spawnMeteor();
  }

  // draw meteors
  for(let i = meteors.length - 1; i >= 0; i--){
    const m = meteors[i];
    // head position
    m.x += m.vx * (dt/16.66);
    m.y += m.vy * (dt/16.66);
    m.life += 1;

    // compute tail end
    const tx = m.x - (m.vx * (m.length / (m.vx === 0 ? 1 : Math.abs(m.vx))));
    const ty = m.y - (m.vy * (m.length / (m.vy === 0 ? 1 : Math.abs(m.vy))));

    // draw gradient stroke from head to tail
    const grad = ctx.createLinearGradient(tx, ty, m.x, m.y);
    grad.addColorStop(0, 'rgba(255,179,71,0)');      // tail transparent gold
    grad.addColorStop(0.2, 'rgba(255,179,71,0.25)'); // gold faint
    grad.addColorStop(0.45, 'rgba(255,255,255,0.6)'); // white mid
    grad.addColorStop(0.75, 'rgba(104, 92, 255,0.8)'); // blue-purple
    grad.addColorStop(1, 'rgba(108,99,255,1)');      // bright purple head

    ctx.lineWidth = m.lineWidth;
    ctx.lineCap = 'round';
    ctx.strokeStyle = grad;
    ctx.beginPath();
    ctx.moveTo(tx, ty);
    ctx.lineTo(m.x, m.y);
    ctx.stroke();

    // small bright head
    ctx.beginPath();
    ctx.fillStyle = 'rgba(255,255,255,0.95)';
    ctx.arc(m.x, m.y, 2.5 * DPR, 0, Math.PI*2);
    ctx.fill();

    // fade out and remove when life exceeded
    if(m.life > m.ttl || m.x < -100 || m.y > H + 100) {
      meteors.splice(i,1);
    }
  }

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

/* ==== Lightweight meteor scheduler using setInterval (keeps timing reliable) ==== */
setInterval(()=>{
  // small randomize to avoid strict rhythm
  if(Math.random() < 0.85) spawnMeteor();
}, METEOR_INTERVAL);

/* ==== QRIS modal and QR generation + download ==== */
const qrisModal = document.getElementById('qrisModal');
const qrImg = document.getElementById('qrImg');
const payloadText = document.getElementById('payloadText');
const copyBtn = document.getElementById('copyBtn');
const downloadBtn = document.getElementById('downloadBtn');
const waBtn = document.getElementById('waBtn');
const openQrisBtn = document.getElementById('openQrisBtn');
const closeModal = document.getElementById('closeModal');

function openModal(note){
  payloadText.value = qrisPayload;
  document.getElementById('modalNote').textContent = note || 'Scan QR untuk bayar — setelah bayar, download bukti lalu konfirmasi WA.';
  qrisModal.classList.add('open');
  // generate QR (bigger for better download)
  QRCode.toDataURL(qrisPayload, {width: 1024}, (err, url) => {
    if(err){
      // fallback to small
      QRCode.toDataURL(qrisPayload, {width: 360}, (e, u)=> { qrImg.src = u; downloadBtn.dataset.url = u; });
    } else {
      qrImg.src = url;
      downloadBtn.dataset.url = url;
    }
  });
  // wa template
  const template = encodeURIComponent("Halo, saya sudah melakukan pembayaran QRIS untuk paket kuota. Mohon aktivasi. Payload: " + qrisPayload);
  waBtn.href = waBase + template;
}

function closeQris(){
  qrisModal.classList.remove('open');
}

openQrisBtn.addEventListener('click', ()=> openModal());

closeModal.addEventListener('click', closeQris);
qrisModal.addEventListener('click', (e)=> { if(e.target === qrisModal) closeQris(); });

copyBtn.addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(qrisPayload);
    copyBtn.textContent = "Disalin ✓";
    setTimeout(()=> copyBtn.textContent = "Salin Payload", 1500);
  }catch(e){
    alert("Salin otomatis gagal. Silakan salin manual:\n\n" + qrisPayload);
  }
});

// download: try canvas blob (from dataURL), if CORS issues -> open in new tab
downloadBtn.addEventListener('click', ()=>{
  const url = downloadBtn.dataset.url;
  if(!url){
    alert("QR belum siap, tunggu sebentar lalu coba lagi.");
    return;
  }
  // create image and draw to hidden canvas
  const img = new Image();
  img.crossOrigin = 'anonymous';
  img.onload = function(){
    const can = document.getElementById('hiddenCanvas');
    const ctx2 = can.getContext('2d');
    const size = Math.max(img.width, img.height);
    can.width = size;
    can.height = size;
    // white background for readability
    ctx2.fillStyle = '#ffffff';
    ctx2.fillRect(0,0,can.width,can.height);
    ctx2.drawImage(img, 0, 0, can.width, can.height);
    can.toBlob(function(blob){
      if(!blob){
        window.open(url, '_blank', 'noopener');
        alert('Download otomatis gagal, QR dibuka di tab baru. Simpan manual (klik kanan → Simpan gambar).');
        return;
      }
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'KUOTA-KITA-QRIS-' + (new Date()).toISOString().replace(/[:.]/g,'-') + '.png';
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=> URL.revokeObjectURL(a.href), 15000);
    }, 'image/png', 0.92);
  };
  img.onerror = function(){
    // fallback: open directly
    window.open(url, '_blank', 'noopener');
    alert('Download otomatis gagal (CORS). Gambar QR dibuka di tab baru — simpan manual.');
  };
  img.src = url + (url.indexOf('?')===-1 ? '?_t=' + Date.now() : '&_t=' + Date.now());
});

// payment flow: open modal with specific package
function openPayment(paket, harga){
  openModal(`Paket: ${paket} — Nominal: Rp${harga}\nScan & bayar, lalu konfirmasi.`);
}

</script>
</body>
  </html>
